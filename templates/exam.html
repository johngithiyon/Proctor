<!DOCTYPE html>
<html>
<head>
    <title>Select Exam</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; text-align: center; }
        h1 { color: #333; }
        .exam-container { max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #ddd; border-radius: 10px; }
        .exam-list { list-style-type: none; padding: 0; }
        .exam-item { margin: 10px 0; padding: 15px; border: 1px solid #eee; border-radius: 5px; cursor: pointer; transition: background-color 0.3s; }
        .exam-item:hover { background-color: #f5f5f5; }
        .selected { background-color: #e6f7ff; border-color: #1890ff; }
        .start-btn { background-color: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-top: 20px; }
        .start-btn:hover { background-color: #45a049; }
        .start-btn:disabled { background-color: #cccccc; cursor: not-allowed; }
        .logout-btn { background-color: #f44336; color: white; padding: 8px 15px; border: none; border-radius: 5px; cursor: pointer; text-decoration: none; display: inline-block; margin-top: 20px; }
        .logout-btn:hover { background-color: #d32f2f; }
        .welcome { margin-bottom: 20px; font-size: 18px; }
    </style>
</head>
<body>
    <div class="exam-container">
        <h1>Select an Exam</h1>
        <div class="welcome">Welcome, {{.Username}}!</div>
        
        <ul class="exam-list">
            {{range .Exams}}
            <li class="exam-item" data-exam="{{.}}">{{.}}</li>
            {{else}}
            <li>No exams available</li>
            {{end}}
        </ul>
        
        <button id="start-exam-btn" class="start-btn" disabled>Start Selected Exam</button>
        <a href="/" class="logout-btn">Logout</a>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const examItems = document.querySelectorAll('.exam-item');
            const startBtn = document.getElementById('start-exam-btn');
            let selectedExam = null;
            
            examItems.forEach(item => {
                item.addEventListener('click', function() {
                    // Remove selected class from all items
                    examItems.forEach(i => i.classList.remove('selected'));
                    
                    // Add selected class to clicked item
                    this.classList.add('selected');
                    
                    // Store selected exam
                    selectedExam = this.getAttribute('data-exam');
                    
                    // Enable start button
                    startBtn.disabled = false;
                });
            });
            
            startBtn.addEventListener('click', function() {
                if (selectedExam) {
                    const username = "{{.Username}}";
                    const examName = encodeURIComponent(selectedExam);
                    // âœ… Redirect to proctor page with username & selected exam
                    window.location.href = `/proctor?user=${encodeURIComponent(username)}&exam=${examName}`;
                }
            });
        });
    </script>
</body>
</html>
